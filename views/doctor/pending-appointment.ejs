<% layout("/layouts/doctorBoilerplate") %>

<!-- Main Content -->
<main class="container py-5">
    <div class="card card-custom p-4 mb-4">
        <h2 class="h5 text-blue-900 mb-4">Pending Appointment Requests</h2>

        <% for (let appointment of allAppointment) { %>
            <% if (appointment.status === "Pending") { %>
                <% let dayName = new Date(appointment.date).toLocaleDateString('en-US', { weekday: 'long' }); %>
                <% let formattedDate = new Date(appointment.date).toLocaleDateString('en-US', { year: 'numeric' , month: 'long' , day: 'numeric' }); %>

                <div class="border rounded p-3 mb-3 shadow-sm d-flex justify-content-between align-items-center flex-wrap">
                    <div>
                        <h3 class="h6 text-blue-800">Patient: Nasim Khan</h3>
                        <p class="mb-1 small">Date: <%= formattedDate %> (<%= dayName %>)</p>
                        <p class="mb-1 small">Shift: <%= appointment.shift %></p>
                    </div>
                    <div class="mt-2 mt-md-0 d-flex gap-2">
                        <form method="POST" action="/doctor/dashboard/pendingappointment/<%= appointment._id %>/confirm">
                            <button type="submit" class="btn btn-success">Confirm</button>
                        </form>
                        <form method="POST" action="/doctor/dashboard/pendingappointment/<%= appointment._id %>/reject">
                            <button type="submit" class="btn btn-red">Reject</button>
                        </form>
                    </div>
                </div>
            <% } %>
        <% } %>
    </div>
</main>
